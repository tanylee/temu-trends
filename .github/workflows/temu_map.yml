name: map-trends-temu
on:
  schedule:
    - cron: "40 5 * * *"
  workflow_dispatch: {}
jobs:
  map:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with: { node-version: 'lts/*' }
      - run: npm ci
      - run: npx playwright install --with-deps
      - env:
          OXYLABS_USER: ${{ secrets.OXYLABS_USER }}
          OXYLABS_PASS: ${{ secrets.OXYLABS_PASS }}
          OXY_ENDPOINT: ${{ secrets.OXY_ENDPOINT }}
        run: |
          node scripts/map_trends_to_temu.js
          node scripts/validate_temu_links.js
      - uses: stefanzweifel/git-auto-commit-action@v5
        with: { commit_message: 'chore: update products' }
